<div class="container">
    <div fxLayout="row" fxLayoutAlign="space-around center">
        <div fxFlex.gt-sm="800px">
            <mat-card class="example-card">
                <mat-card-header>
                    <mat-card-title class="card-title-container">
                        <span *ngIf="!noEventRetrieved && event !== null; else no_event_container">
                            <span [innerHTML]="event.name">
                            </span>
                        </span>
                        <ng-template #no_event_container>
                            <span *ngIf="noEventRetrieved">
                                No Process Selected
                            </span>
                        </ng-template>
                    </mat-card-title>
                    <mat-card-subtitle>
                        <span *ngIf="!noEventRetrieved">
                            B = {{bFieldStrength}} kG
                        </span>
                    </mat-card-subtitle>
                </mat-card-header>

                <mat-card-content>
                    <div fxLayout="row" fxLayoutAlign="space-around center">
                        <div fxFlex="60%">
                            <div fxLayout="row" fxLayoutAlign="space-around center">
                                <div *ngIf="boundaries && dots">
                                    <svg [attr.height]="boundaries.height" [attr.width]="boundaries.width">
                                        <rect [attr.x]="boundaries.xminPx" [attr.y]="boundaries.ymaxPx"
                                            [attr.width]="boundaries.widthDisplay"
                                            [attr.height]="boundaries.heightDisplay"
                                            style="fill:blue;stroke:grey;stroke-width:5;fill-opacity:0.1;stroke-opacity:0.9" />

                                        <g *ngFor="let dot of dots">
                                            <circle (mouseover)="dot.checkDot(colourModeOn)" [attr.r]="dot.findRadius()"
                                                [attr.cx]="dot.x" [attr.cy]="dot.y"
                                                [attr.stroke-width]="dot.findStrokeWidth()" stroke="red" fill="grey">
                                            </circle>
                                        </g>

                                        <g *ngIf="eventDisplay && ((!editModeOn)||revealEvent)">
                                            <path *ngIf="eventDisplay" [attr.d]="eventDisplay.inCharged" stroke="green"
                                                stroke-width="3" fill="none">
                                            </path>
                                            <path *ngIf="eventDisplay" [attr.d]="eventDisplay.inNeutral" stroke="green"
                                                stroke-dasharray="10, 5" stroke-width="3">
                                            </path>
                                            <path *ngIf="eventDisplay" [attr.d]="eventDisplay.outCharged" stroke="grey"
                                                stroke-width="3" fill="none">
                                            </path>
                                            <path *ngIf="eventDisplay" [attr.d]="eventDisplay.outNeutral" stroke="grey"
                                                stroke-dasharray="10, 5" stroke-width="3">
                                            </path>
                                        </g>
                                        <g *ngFor="let circle of circles">
                                            <circle [attr.r]="circle.rPx" [attr.cx]="circle.xcPx"
                                                [attr.cy]="circle.ycPx" [attr.stroke-width]="circle.strokeWidth()"
                                                stroke-dasharray="3, 7, 10, 7" [attr.stroke]="circle.circleColour()"
                                                fill="none">
                                            </circle>
                                        </g>

                                        <g *ngIf="eventDisplay && editModeOn && showAxes">
                                            <line [attr.x1]="hAxisParams.x1" [attr.x2]="hAxisParams.x2"
                                                [attr.y1]="hAxisParams.y1" [attr.y2]="hAxisParams.y2"
                                                [attr.stroke-width]="1" [attr.stroke]="'grey'">
                                            </line>
                                            <line [attr.x1]="vAxisParams.x1" [attr.x2]="vAxisParams.x2"
                                                [attr.y1]="vAxisParams.y1" [attr.y2]="vAxisParams.y2"
                                                [attr.stroke-width]="1" [attr.stroke]="'grey'">
                                            </line>
                                        </g>

                                        <!--
                  
        
                  <g *ngIf="eventDisplay && editModeOn && showAxes" app-axis
                     [boundaries]="boundaries"
                     [interactionLocation]="interactionLocation"
                     [wakeUp]="circleChange">
                  </g>
        
                  maybe this will work? https://www.codeproject.com/Articles/5249902/Creating-Amazing-Diagrams-using-Angular-and-SVG
        
                   https://www.chrisjmendez.com/2017/06/17/angular-dynamically-inserting-svg-into-an-element/
        
                -->





                                    </svg>

                                </div>
                            </div>
                        </div>
                        <div fxFlex="40%">
                            <div *ngIf="momentumDiagramBoundaries && eventDisplay && editModeOn && showAxes" class="row">
                                <app-momentum-axis
                                    [circles]="circles"
                                    [boundaries]="momentumDiagramBoundaries">
                                </app-momentum-axis>
                            </div>
                            <app-circle-table [circles]="circles" [event]="event" [userIsReadOnly]="userIsReadOnly">
                            </app-circle-table>
                        </div>

                    </div>

                    <div *ngIf="!userIsReadOnly">
                        <div *ngIf="!editModeOn">
                            <button mat-stroked-button color="primary" (click)="fetchNewEvent()">Get Event</button>
                            <button *ngIf="event" mat-stroked-button color="primary" (click)="turnOnEditMode()">Analyze
                                This
                                Event</button>
                        </div>
                        <div *ngIf="editModeOn">
                            <button *ngIf="!userIsReadOnly" mat-stroked-button color="primary" (click)="addCircle()">Add
                                Circle</button>
                            <button *ngIf="!userIsReadOnly" mat-stroked-button color="primary"
                                (mouseenter)="showEvent()" (mouseout)="hideEvent()">
                                Show Event
                            </button>

                        </div>
                    </div>






                </mat-card-content>

            </mat-card>

        </div>
    </div>

</div>